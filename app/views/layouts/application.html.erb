<!DOCTYPE html>
<html>
  <head>
    <title><%= content_for(:title) || "Helloworldapplication" %></title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= yield :head %>

    <link rel="icon" href="/icon.png" type="image/png">
    <link rel="icon" href="/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/icon.png">

    <%= stylesheet_link_tag :app, "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>

    <!-- Bootstrap CSS CDN -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    >

    <!-- Bootstrap Icons CDN -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
      rel="stylesheet"
    >

<style>
  .nav-link.active {
    background-color: #6c757d !important;
    color: white !important;
    border-top-right-radius: 0 !important;
    border-bottom-right-radius: 0 !important;
    border-top-left-radius: 7px !important;
    border-bottom-left-radius: 7px !important;
  }

  .nav-link:hover {
    background-color: #5a6268 !important;
    color: white !important;
  }

  .nav-link.active i {
  color: #efbf04 !important;
}


  .top-navbar {
    background-color: #004a99;
    color: white;
    font-weight: 600;
    font-size: 1.2rem;
    height: 56px;
    display: flex;
    align-items: center;
    padding-left: 25px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1030;
  }

  body {
    padding-top: 56px;
  }

  .sidebar {
    width: 250px;
    background-color: #343a40;
    color: white;
    position: fixed;
    top: 56px; 
    left: 0;
    bottom: 0;
    overflow-y: auto;
    z-index: 1000;
  }

  .main-content {
    margin-left: 250px;
    height: calc(100vh - 56px);
    overflow-y: auto;
    background-color: #f8f9fa;
    padding: 1.5rem;
  }
</style>

  </head>

  <body>
    <nav class="top-navbar fs-4">
       mySchoolManager
    </nav>

    <nav class="sidebar d-flex flex-column py-3 text-white">
      <a class="d-flex flex-column justify-content-center align-items-center mt-3 text-white text-decoration-none" href="#">
        <%= image_tag "Ateneo_de_Naga_University_logo.png", width: 140, height: 140, class: "mb-2 rounded-circle" %>
        <span class="fw-semibold text-center" style="font-size: 1.05rem;">Ateneo de Naga University</span>
      </a>

      <hr class="text-white opacity-90 my-3 mx-auto" style="height: 1px; width: 85%;">

          <ul class="nav nav-pills flex-column mb-auto">
      <li class="nav-item">
        <%= link_to students_path, class: "d-flex align-items-center nav-link link-light #{'active' if controller_name == 'students'}" do %>
          <i class="bi bi-mortarboard-fill me-2"></i>
          <span>Students</span>
        <% end %>
      </li>

      <li>
        <%= link_to subjects_path, class: "d-flex align-items-center nav-link link-light #{'active' if controller_name == 'subjects'}" do %>
          <i class="bi bi-book-half me-2"></i>
          <span>Subjects</span>
        <% end %>
      </li>

      <li>
        <%= link_to sections_path, class: "d-flex align-items-center nav-link link-light #{'active' if controller_name == 'sections'}" do %>
          <i class="bi bi-diagram-3 me-2"></i>
          <span>Sections</span>
        <% end %>
      </li>

      <li>
        <%= link_to classlists_path, class: "d-flex align-items-center nav-link link-light #{'active' if controller_name == 'classlists'}" do %>
          <i class="bi bi-list-check me-2"></i>
          <span>Classlists</span>
        <% end %>
      </li>

      <li>
        <%= link_to teachers_path, class: "d-flex align-items-center nav-link link-light #{'active' if controller_name == 'teachers'}" do %>
          <i class="bi bi-person-video3 me-2"></i>
          <span>Teachers</span>
        <% end %>
      </li>

      <li>
        <%= link_to staffs_path, class: "d-flex align-items-center nav-link link-light #{'active' if controller_name == 'staffs'}" do %>
          <i class="bi bi-person-badge-fill me-2"></i>
          <span>Staffs</span>
        <% end %>
      </li>

      <li>
        <%= link_to departments_path, class: "d-flex align-items-center nav-link link-light #{'active' if controller_name == 'departments'}" do %>
          <i class="bi bi-bank2 me-2"></i> 
          <span>Departments</span>
        <% end %>
      </li>

      <li>
        <%= link_to guardians_path, class: "d-flex align-items-center nav-link link-light #{'active' if controller_name == 'guardians'}" do %>
          <i class="bi bi-person-heart me-2"></i>
          <span>Guardians</span>
        <% end %>
      </li>

      <li>
        <%= link_to student_guardians_path, class: "d-flex align-items-center nav-link link-light #{'active' if controller_name == 'student_guardians'}" do %>
          <i class="bi bi-link-45deg me-2"></i>
          <span>Student-Guardians</span>
        <% end %>
      </li>
    </ul>
    </nav>

    <div class="main-content">
      <% flash.each do |key, message| %>
        <div class="alert alert-<%= key == "notice" ? "success" : "danger" %> alert-dismissible fade show" role="alert">
          <%= message %>
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      <% end %>

      <div class="bg-light p-4 rounded-4">
        <%= yield %>
      </div>
    </div>

    <!-- Bootstrap JS CDN -->
    <script 
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js">
    </script>
  </body>
</html>



<!-- Delete Confirmation Modal -->
<div class="modal fade" id="confirmDeleteModal" tabindex="-1" aria-hidden="true" data-bs-backdrop="false">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content shadow-sm border border-danger-subtle p-2">
      <div class="modal-header border-0 py-1">
        <button type="button" class="btn-close ms-auto" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body text-center py-2">
        <div class="d-flex align-items-center justify-content-center gap-3">
          <i class="bi bi-exclamation-triangle-fill text-danger fs-2"></i>
          <div class="text-start">
            <p class="mb-1 fw-semibold">Are you sure you want to delete this student?</p>
            <p class="text-secondary small mb-0">
              This student will be deleted immediately. You can't undo this action.
            </p>
          </div>
        </div>
      </div>

      <div class="modal-footer justify-content-center border-0 pt-1 pb-2">
        <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Cancel</button>
        <form id="deleteStudentForm" method="post" data-turbo="false" class="d-inline">
          <input type="hidden" name="_method" value="delete">
          <button type="submit" class="btn btn-danger btn-sm">Delete</button>
        </form>
      </div>
    </div>
  </div>
</div>